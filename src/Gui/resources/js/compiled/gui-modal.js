!function(o){"use strict";let t=function(a,l){let e=this;this.$element=o(a);this.options=o.extend({},t.DEFAULTS,o.extend({},this.$element.data(),l));this.modal=bootstrap.Modal.getOrCreateInstance(this.options.modalTarget,{backdrop:this.options.modalBackdrop,keyboard:this.options.modalKeyboard});this.$modal=o(this.options.modalTarget);this.$modal.data("gui.modal",this);this.$element.on("click",(function(o){o.preventDefault();e.show()}));this.$modal.on("hidden.bs.modal",(function(){o(".modal-dialog",e.$modal).removeClass(["modal-sm","modal-md","modal-lg","modal-xl","modal-xxl"])}))};t.prototype._load=function(){let t=this,a=0;let l=false;o.ajax({cache:false,url:this.options.modalUrl,headers:{"X-CSRF-TOKEN":o('meta[name="csrf-token"]').attr("content")},dataType:"html",beforeSend:function(){o(".modal-content",t.$modal).html("");a=setTimeout((function(){o(".modal-dialog",t.$modal).addClass("loading");o(".modal-content",t.$modal).html('<div class="loading" />')}),300)},success:function(l){clearTimeout(a);o(".modal-content",t.$modal).html(l)},complete:function(){clearTimeout(a);let e=o(".modal-dialog",t.$modal).removeClass("loading");if(!l){e.removeClass(["modal-sm","modal-md","modal-lg","modal-xl","modal-xxl"])}e.addClass(t.options.modalClass)},error:function(e){if(e.status!==404){l=true}clearTimeout(a);t.printError(e);gui.init(o(".modal-content",t.$modal))}})};t.prototype.printError=function(t){if(t.status===500&&t.responseText.indexOf("<!DOCTYPE html")!==-1){gui.ignitionErrorFrame(t.responseText,o(".modal-content",this.$modal));this.options.modalClass=null}else{o(".modal-content",this.$modal).html(t.responseText);this.options.modalClass="modal-md"}};t.prototype.show=function(){let t=this;if(this.$element.attr("data-bs-toggle")=="tooltip"){let o=bootstrap.Tooltip.getOrCreateInstance(this.$element[0]);o.hide()}if(this.options.modalUrl){o(this.options.modalTarget).on("show.bs.modal.gui",(function(){t._load()}))}else{o(".modal-dialog",this.$modal).addClass(this.options.modalClass)}o(this.options.modalTarget).on("hidden.bs.modal.gui",(function(){o(".modal-dialog",t.$modal).removeClass(t.options.modalClass);if(t.options.modalUrl){o(".modal-content",o(this)).html("")}o(this).off("show.bs.modal.gui");o(this).off("hidden.bs.modal.gui")}));this.modal.show()};t.prototype.hide=function(){this.modal.hide()};t.DEFAULTS={modalBackdrop:"static",modalKeyboard:false,modalTarget:"#gui_modal",modalClass:"",modalUrl:null};o.fn.GUIModal=function(a){return o.each(this,(function(){let l=o(this);let e=l.data("gui.modal.initiator");let i=typeof a=="object"&&a;if(!e)l.data("gui.modal.initiator",new t(this,i))}))}}(jQuery);