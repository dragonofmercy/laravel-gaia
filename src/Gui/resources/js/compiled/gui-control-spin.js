!function(t){"use strict";let i=function(e,n){let o=this;this.$element=t(e);this.options=t.extend({},i.DEFAULTS,n);this.$container=this.$element.parent();this.direction=0;this.timeoutHandle=null;this.intervalHandle=null;if(this.options.step.toString().indexOf(".")>=0){this.options.keys.push(110);this.options.keys.push(190)}this.options.min=this.options.min!==null?parseFloat(this.options.min):null;this.options.max=this.options.max!==null?parseFloat(this.options.max):null;if(this.isNum(this.options.min)&&this.isNum(this.options.max)&&this.options.min>this.options.max){console.error("Min option cannot be grather than max option")}this.options.step=parseFloat(this.options.step);this.$btnUp=t("a[data-type=up]",this.$container);this.$btnDown=t("a[data-type=down]",this.$container);this.$btnUp.on("mousedown touchstart",(function(){o.mousedown(1)})).on("mouseup mouseout touchend touchcancel",(function(){o.stopKeyRepeat()}));this.$btnDown.on("mousedown touchstart",(function(){o.mousedown(-1)})).on("mouseup mouseout touchend touchcancel",(function(){o.stopKeyRepeat()}));this.$element.on("focusout",(function(){o.validateValue()})).on("keydown",(function(t){o.keydown(t)})).on("keyup",(function(){o.stopKeyRepeat()})).on("mousewheel DOMMouseScroll",(function(t){o.mouseWheel(t)}))};i.prototype.mouseWheel=function(t){this.changeValue(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?1:-1);t.preventDefault()};i.prototype.keydown=function(i){if(this.options.keys!==null&&t.grep(this.options.keys,(function(t){return t===i.keyCode||t instanceof RegExp&&t.test(String.fromCharCode(i.keyCode))})).length){let t={up:38,down:40,pageUp:33,pageDown:34};this.startKeyRepeat();switch(i.keyCode){case t.up:case t.pageUp:this.changeValue(1);break;case t.down:case t.pageDown:this.changeValue(-1);break}}else{i.preventDefault()}};i.prototype.mousedown=function(t){this.startKeyRepeat();this.changeValue(t)};i.prototype.changeValue=function(t){let i=this.getValue();if(this.$element.not(":disabled").not("[readonly]").length){this.direction=t||0;if(this.direction>0){i+=this.options.step}else if(this.direction<0){i-=this.options.step}this.validateValue(i)}};i.prototype.startKeyRepeat=function(){let t=this;this.stopKeyRepeat();this.timeoutHandle=window.setTimeout((function(){t.changeValue(t.direction);t.intervalHandle=window.setInterval((function(){t.changeValue(t.direction)}),t.options.interval)}),this.options.delay)};i.prototype.stopKeyRepeat=function(){window.clearTimeout(this.timeoutHandle);window.clearInterval(this.intervalHandle)};i.prototype.validateValue=function(t){let i=0;t=t??this.getValue();if(t===null){return}if(this.options.step.toString().indexOf(".")!==false){i=this.options.toString().substring(this.options.step.toString().indexOf(".")+1).length}if(t!==this.options.unlimitedValue){if(this.isNum(this.options.max)&&t>this.options.max){t=this.options.max}else if(this.isNum(this.options.min)&&t<this.options.min){if(this.options.unlimitedValue!==null&&this.options.unlimitedValue<this.options.min){if(t==this.options.unlimitedValue+this.options.step){t=this.options.min}else{t=this.options.unlimitedValue}}else{t=this.options.min}}}t=Number(t.toFixed(i));if(t!==parseFloat(this.$element.val())){this.$element.val(t.toString());this.$element.trigger("gui.spin.change")}};i.prototype.getValue=function(){if(this.isNum(this.$element.val())){return parseFloat(this.$element.val())}else{return this.isNum(this.options.min)?this.options.min:this.isNum(this.options.max)&&this.options.max<0?this.options.max:null}};i.prototype.isNum=function(t){return!isNaN(parseFloat(t))};i.DEFAULTS={min:0,max:null,step:1,unlimitedValue:null,keys:[/[0-9]/,9,13,8,46,33,34,37,38,39,40,109,96,97,98,99,100,101,102,103,104,105],delay:500,interval:50,iconUp:"fas fa-angle-up",iconDown:"fas fa-angle-down"};t.fn.GUIControlSpin=function(e){t.each(this,(function(){let n=t(this);let o=n.data("gui.spin");let s=typeof e=="object"&&e;if(!o)n.data("gui.spin",new i(this,s))}))}}(jQuery);