!function(t){"use strict";let e=function(o,n){let i=this;this.$element=t(o);this.options=t.extend({},e.DEFAULTS,n);this.$container=this.$element.parent();this.$btnShowHide=t("button[data-toggle=toggle]",this.$container);this.$btnGenerate=t("button[data-toggle=generator]",this.$container);if(this.$btnShowHide.length){this.$btnShowHide.on("click",(function(){i.toggleType(t("i",t(this)))}))}if(this.$btnGenerate.length){this.initGenerator();this.$btnGenerate.on("click",(function(){i.popover.toggle()}))}};e.prototype.toggleType=function(t){if(t.attr("class")===this.options.iconReveal){this.$element.attr("type","text");t.attr("class",this.options.iconHide)}else{this.$element.attr("type","password");t.attr("class",this.options.iconReveal)}};e.prototype.initGenerator=function(){let e=this;this.popover=new bootstrap.Popover(this.$btnGenerate[0],{content:this.$container.next().html(),title:this.options.strings.generatorTitle,customClass:"password-generator",animation:false,trigger:"manual",placement:"top",sanitize:false,html:true});this.$btnGenerate.on("shown.bs.popover",(function(){if(e.$element.val()){e.setText(e.$element.val())}else{e.$generatorBtnRandom.trigger("click")}t(document).on("mousedown.gui.password touchend.gui.password",(function(o){if(!t(o.target).closest(".popover.password-generator").length&&t(".popover.password-generator").is(":visible")){e.popover.hide()}}))})).on("hidden.bs.popover",(function(){t(document).off("mousedown.gui.password touchend.gui.password")})).on("inserted.bs.popover",(function(){e.initGeneratorContent()}))};e.prototype.initGeneratorContent=function(){let e=this;this.$generatorContainer=t(this.popover.tip);this.$PasswordDisplay=t(".password-display",this.$generatorContainer);this.$range=t(".form-range",this.$generatorContainer);this.$generatorBtnRandom=t("button[data-toggle=random]",this.$generatorContainer);this.$generatorBtnChoose=t("button[data-toggle=choose]",this.$generatorContainer);this.$range.attr("min",this.options.min);this.$range.attr("max",this.options.max);if(this.$element.val()){this.$range.val(this.$element.val().length)}else{this.$range.val(Number((this.options.max+this.options.min)/2,0))}t(".range-min",this.$generatorContainer).html(this.options.min);t(".range-max",this.$generatorContainer).html(this.options.max);this.$range.GUIControlRange({tooltip:true});this.$generatorBtnRandom.on("click",(function(){e.setText(e.generateValidPassword())}));this.$generatorBtnChoose.on("click",(function(){e.updatePassword(t(this).data("copy"))}));this.$range.on("input",(function(){e.$generatorBtnRandom.trigger("click")}));this.$PasswordDisplay.on("click",(function(){t(this).trigger("select")}))};e.prototype.updatePassword=function(e){if(this.options.copyInField!=="none"){let e=this.options.copyInField==="auto"?this.$element.parents("form-group").next().find(".gui-control-password input"):t(this.options.copyInField);if(e.length){e.val(this.$PasswordDisplay.val()).trigger("change.gui")}}if(e){this.$PasswordDisplay.GUICopy({tooltip:false}).data("gui.copy").copy()}this.$element.val(this.$PasswordDisplay.val()).trigger("change.gui");this.popover.hide()};e.prototype.generateValidPassword=function(){let t=new RegExp(this.options.regex);let e="";let o=0;do{e=this.generateRandomPassword(this.$range.val(),this.options.chars);if(o>200){return}else{o++}}while(t.test(e)===false);return e};e.prototype.generateRandomPassword=function(t,e){let o="";for(let n=0;n<t;n++){o+=e.charAt(Math.floor(Math.random()*e.length))}return o};e.prototype.setText=function(t){this.fitText(this.$PasswordDisplay,t);this.$PasswordDisplay.val(t)};e.prototype.fitText=function(e,o){let n=this.options.passwordFontSize;let i=t('<span class="measure" />').css("font-size",n+"em").html(o);t(".gui-password-generator",this.$generatorContainer).append(i);while(i.width()>e.width()){n-=.01;i.css("font-size",n+"em")}i.remove();e.css("font-size",n+"em")};e.DEFAULTS={min:8,max:32,chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.-@",regex:"^[A-Za-z0-9]+(?=.*[0-9])(?=.*[a-z])(?=.*[.@-])(?=.*[A-Z]).*[A-Za-z0-9]+$",iconReveal:"fa-regular fa-eye-slash",iconHide:"fa-regular fa-eye",iconGenerate:"fa-solid fa-gear",passwordFontSize:1.5,copyInField:"auto",strings:{generatorTitle:"Password generator"}};t.fn.GUIControlPassword=function(o){t.each(this,(function(){let n=t(this);let i=n.data("gui.password");let s=typeof o=="object"&&o;if(!i)n.data("gui.password",new e(this,s))}))}}(jQuery);