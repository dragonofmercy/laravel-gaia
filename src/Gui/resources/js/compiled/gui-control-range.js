!function(t){"use strict";let e=function(i,n){let s=this;this.$element=t(i);this.options=t.extend({},e.DEFAULTS,t.extend({},this.$element.data(),n));this.popupTimeout=null;if(!this.$element.parent().hasClass("gui-input-range")){this.$element.wrap('<div class="gui-input-range" />')}if(this.options.rangeTooltip){this.$tip=t('<div class="range-tooltip tooltip bs-tooltip-top"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>');this.$tip.insertAfter(this.$element)}if(this.options.rangeProgression){this.$element.addClass("show-progress");this.$element.parent().append('<div class="range-progress" />');this.$element.parent().append('<div class="range-track" />')}this.$list=t("#"+this.$element.attr("list"));if(this.$element.attr("disabled")||this.$element.attr("readonly")){this.$element.parent().addClass("disabled");this.$element.on("focus",(function(){s.$element.trigger("blur")}))}this.$element.on("input",(function(){s.update()})).on("keydown",(function(t){if(t.keyCode>=37&&t.keyCode<=40){s.$element.addClass("active");if(s.popupTimeout!==null){clearTimeout(s.popupTimeout)}s.popupTimeout=setTimeout((function(){s.$element.removeClass("active")}),1e3)}}));this.$element.trigger("input")};e.prototype.update=function(){let e=this.$element.val();let i=this.$element.attr("min")?this.$element.attr("min"):0;let n=this.$element.attr("max")?this.$element.attr("max"):100;let s=Number((e-i)*100/(n-i));this.$element.trigger("gui.range.input",[s]);if(this.options.rangeProgression){t(".range-progress",this.$element.parent()).css("width",`calc(${s}% + (${8-s*.15}px))`)}if(this.options.rangeTooltip){if(this.$list.length&&this.$list.find("option[value="+e+"]").length){t(".tooltip-inner",this.$tip).html(this.$list.find("option[value="+e+"]").attr("label"))}else{t(".tooltip-inner",this.$tip).html(this.format(e.toString()))}let i=`calc(${this.$tip.outerHeight()}px * -1)`;let n=this.$tip.outerWidth()*-.5;this.$tip.css({left:`calc(${s}% + (${8-s*.15}px))`,marginLeft:n,top:i})}};e.prototype.format=function(...t){return this.options.rangeTooltipFormat.replace(/(\{\d+\})/g,(function(e){return t[+e.substring(1,e.length-2)||0]}))};e.DEFAULTS={rangeProgression:true,rangeTooltip:true,rangeTooltipFormat:"{0}"};t.fn.GUIControlRange=function(i){t.each(this,(function(){let n=t(this);let s=n.data("gui.range");let o=typeof i=="object"&&i;if(!s)n.data("gui.range",new e(this,o))}))}}(jQuery);